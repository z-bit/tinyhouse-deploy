{"version":3,"sources":["lib/graphql/mutations/ConnectStripe.ts","lib/graphql/mutations/CreateBooking.ts","lib/graphql/mutations/DisconnectStripe.ts","lib/graphql/mutations/HostListing.ts","lib/graphql/mutations/LogIn.ts","lib/graphql/mutations/LogOut.ts","lib/graphql/queries/AuthUrl.ts","lib/graphql/queries/Listing.ts","lib/graphql/queries/Listings.ts","lib/graphql/queries/User.ts","sections/AppHeader/assets/tinyhouse-logo.png","lib/utils.ts","sections/AppHeader/AppHeader.tsx","sections/AppHeader/AppHeaderMenuItems.tsx","sections/AppHeader/AppHeaderSkeleton.tsx","sections/Home/assets/map-background.jpg","sections/Home/assets/san-francisco.jpg","sections/Home/assets/cancun.jpg","sections/Home/Home.tsx","sections/Home/assets/toronto.jpg","sections/Home/assets/dubai.jpg","sections/Home/assets/los-angeles.jpg","sections/Home/assets/london.jpg","sections/Home/HomeHero.tsx","lib/components/ErrorBanner.tsx","lib/components/PageSkeleton.tsx","lib/components/ListingCard.tsx","sections/Home/HomeListings.tsx","sections/Home/HomeListingsSkeleton.tsx","sections/Home/assets/listing-loading-card-cover.jpg","sections/Host/Host.tsx","sections/Listing/Listing.tsx","sections/Listing/ListingBookings.tsx","sections/Listing/ListingCreataBooking.tsx","sections/Listing/ListingCreateBookingModal.tsx","sections/Listing/ListingDetails.tsx","sections/Listings/Listings.tsx","sections/Listings/ListingsFilters.tsx","sections/Listings/ListingsPagination.tsx","sections/Listings/ListingsSkeleton.tsx","sections/Listings/assets/listing-loading-card-cover.jpg","sections/Login/Login.tsx","sections/Login/assets/google_logo.jpg","sections/NotFound/NotFound.tsx","sections/Stripe/Stripe.tsx","sections/User/User.tsx","sections/User/UserBookings.tsx","sections/User/UserListings.tsx","sections/User/UserProfile.tsx","reportWebVitals.ts","index.tsx","lib/graphql/mutations/index.ts","lib/graphql/globalTypes.ts","lib/graphql/queries/index.ts"],"names":["CONNECT_STRIPE","gql","CREATE_BOOKING","DISCONNECT_STRIPE","HOST_LISTING","LOG_IN","LOG_OUT","AUTH_URL","LISTING","LISTINGS","USER","formatPrice","price","round","formattedPrice","Math","iconColor","displaySuccessNotification","message","description","notification","placement","duration","style","marginTop","displayErrorMessage","error","Header","Layout","Search","Input","AppHeader","withRouter","viewer","setViewer","history","location","useState","search","setSearch","useEffect","pathname","includes","parts","split","length","className","to","src","logo","alt","placeholder","enterButton","onSearch","value","trimmedValue","trim","push","window","reload","onChange","e","target","Item","Menu","SubMenu","AppHeaderMenuItems","useMutation","onCompleted","data","logOut","sessionStorage","removeItem","onError","subMenuLogin","id","avatar","title","UserOutlined","onClick","LogoutOutlined","type","mode","selectable","HomeOutlined","AppHeaderSkeleton","Content","Paragraph","Typography","Title","Home","useQuery","variables","filter","ListingsFilter","PRICE_HIGH_TO_LOW","limit","page","loading","backgroundImage","mapBackground","listings","result","level","gutter","xs","sm","sanFrancisco","cancun","HomeHero","size","md","cover","toronto","dubai","losAngeles","london","ErrorBanner","nextAction","banner","closable","onClose","PageSkeleton","skeletonParagraph","active","paragraph","rows","Text","ListingCard","listing","image","address","numOfGuests","hoverable","strong","ellipsis","color","paddingRight","HomeListings","grid","lg","xl","xxl","dataSource","renderItem","HomeListingsSkeleton","Form","Host","imageLoading","setImageLoading","imageBase64","setImageBase64","hostListing","useForm","form","hasWallet","layout","onFinish","evt","validateFields","then","values","city","state","zip","fullAddress","input","console","log","label","name","rules","required","Group","Button","ListingType","HOUSE","HomeTwoTone","APARTMENT","AppstoreTwoTone","min","extra","maxLength","TextArea","listType","showUploadList","action","beforeUpload","beforeImageUpload","info","file","status","originFileObj","getBase64","LoadingOutlined","PlusOutlined","htmlType","text","img","callback","reader","FileReader","readAsDataURL","onload","Listing","match","bookingsPage","setBookingsPage","checkInDate","setCheckInDate","checkOutDate","setCheckOutDate","modalVisible","setModalVisible","params","refetch","refetchListing","a","listingBookings","bookings","listingDeatailsElement","listingBookingElement","listingCreateBookingElement","host","bookingsIndex","listingCreateBookingModalElement","clearBooking","justify","ListingBookings","total","listingBookingsList","undefined","locale","emptyText","pagination","current","defaultPageSize","hideOnSinglePage","showLessItems","listingBooking","bookingHistory","checkIn","checkOut","tenant","shape","ListingCreateBooking","bookingsIndexJson","JSON","parse","refCheckin","useRef","refFirstBooking","isBooked","date","year","moment","month","day","periodContainsAlreadyBookedDays","strt","ende","d","isBefore","add","firstBooking","buttonMessage","disableCheckin","disabled","format","showToday","disabledDate","gridDate","onCheckInChange","onOpenChange","isAfter","WrappedListingCreateBookingModal","injectStripe","stripe","createBooking","daysBooked","diff","listingPrice","handleCreateBooking","createToken","stripeToken","token","listingId","source","visible","centered","footer","onCancel","KeyOutlined","mark","hidePostalCode","ListingDetails","EnvironmentOutlined","expandable","Listings","PRICE_LOW_TO_HIGH","setFilter","setPage","setLocation","skip","listingsRegion","region","listingsSectionElement","offsetTop","listingsRegionElement","Option","Select","ListingsFilters","ListingsPagination","ListingsSkeleton","Login","client","useApolloClient","logIn","setItem","logInData","logInLoading","logInError","logInRef","code","URL","href","searchParams","get","handleAuthorize","query","authUrl","tip","viewerId","logInErrorBannerElement","role","aria-label","NotFound","Stripe","connectStripe","connectStripeRef","replace","User","listingsPage","setListingsPage","handleUserRefetch","stripeErrorBanner","user","viewerIsUser","userListings","userBookings","userProfileElement","userListingsElement","userBookingsElement","UserBookings","userBookingsList","position","userBooking","user-bookings__bookings-history","UserListings","myTotal","userListingsList","userListing","stripeAuthUrl","process","UserProfile","disconnectStripe","additionalDetails","income","rel","additionalDetailsSection","contact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ApolloClient","uri","request","operation","getItem","setContext","headers","initialViewer","didRequest","App","loginError","exact","path","component","render","props","apiKey","document","getElementById"],"mappings":"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","file":"static/js/main.b1e40a4a.chunk.js","sourcesContent":["import { gql } from 'apollo-boost'\r\n\r\nexport const CONNECT_STRIPE = gql`\r\n  mutation ConnectStripe($input: ConnectStripeInput!) {\r\n    connectStripe(input: $input) {\r\n      hasWallet\r\n    }\r\n  }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/ConnectStripe'","import { gql } from 'apollo-boost'\r\n\r\nexport const CREATE_BOOKING = gql`\r\n  mutation CreateBooking($input: CreateBookingInput!) {\r\n    createBooking(input: $input) {\r\n      id\r\n    }\r\n  }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/CreateBooking'","import { gql } from 'apollo-boost'\r\n\r\nexport const DISCONNECT_STRIPE = gql`\r\n  mutation DisconnectStripe {\r\n    disconnectStripe {\r\n      hasWallet\r\n    }\r\n  }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/DisconnectStripe'","import { gql } from 'apollo-boost'\r\n\r\nexport const HOST_LISTING = gql`\r\n  mutation HostListing($input: HostListingInput!) {\r\n    hostListing(input: $input) {\r\n      id\r\n    }\r\n  }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/HostListing'","import { gql } from 'apollo-boost'\r\n\r\nexport const LOG_IN = gql`\r\n    mutation LogIn($input: LogInInput) {\r\n        logIn(input: $input) {\r\n            id\r\n            token\r\n            avatar\r\n            hasWallet\r\n            didRequest\r\n        }\r\n    }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/LogIn'","import { gql } from 'apollo-boost'\r\n\r\nexport const LOG_OUT = gql`\r\n    mutation LogOut {\r\n        logOut {\r\n            id\r\n            token\r\n            avatar\r\n            hasWallet\r\n            didRequest\r\n        }\r\n    }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/LogOut'","import { gql } from 'apollo-boost'\r\n\r\nexport const AUTH_URL = gql`\r\n    query AuthUrl {\r\n        authUrl\r\n    }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/AuthUrl'","import { gql } from 'apollo-boost'\r\n\r\nexport const LISTING = gql`\r\n  query Listing($id: ID!, $bookingsPage: Int!, $limit: Int!) {\r\n    listing(id: $id) {\r\n      id\r\n      title\r\n      description\r\n      image\r\n      host {\r\n        id\r\n        name\r\n        avatar\r\n        hasWallet\r\n      }\r\n      type\r\n      address\r\n      city\r\n      bookings(limit: $limit, page: $bookingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          tenant {\r\n            id\r\n            name\r\n            avatar\r\n          }\r\n          checkIn\r\n          checkOut\r\n        }      \r\n      }\r\n      bookingsIndex\r\n      price\r\n      numOfGuests\r\n    }\r\n  }\r\n`\r\nexport * from './--loacalSchemaFile=schema.json/Listing'","import { gql } from 'apollo-boost'\r\n\r\nexport const LISTINGS = gql`\r\n  query Listings(\r\n    $location: String, \r\n    $filter: ListingsFilter!, \r\n    $limit: Int!, \r\n    $page: Int!\r\n  ) {\r\n    listings(location: $location, filter: $filter, limit: $limit, page: $page) {\r\n      region\r\n      total\r\n      result {\r\n        id\r\n        title\r\n        image\r\n        address\r\n        price\r\n        numOfGuests\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport * from './--loacalSchemaFile=schema.json/Listings'","import { gql } from 'apollo-boost'\r\n\r\nexport const USER = gql`\r\n    query User($id: ID!, $bookingsPage: Int!, $listingsPage: Int!, $limit: Int!) {\r\n        user(id: $id) {\r\n            id\r\n            name\r\n            avatar\r\n            contact\r\n            hasWallet\r\n            income\r\n            bookings(limit: $limit, page: $bookingsPage) {\r\n                total\r\n                result {\r\n                    id\r\n                    listing {\r\n                        id\r\n                        title\r\n                        image\r\n                        address\r\n                        price\r\n                        numOfGuests\r\n                    }\r\n                    checkIn\r\n                    checkOut\r\n                }\r\n            }\r\n            listings(limit: $limit, page: $listingsPage) {\r\n                total\r\n                result {\r\n                   id\r\n                    title\r\n                    image\r\n                    address\r\n                    price\r\n                    numOfGuests\r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport * from './--loacalSchemaFile=schema.json/User'","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABICAYAAACp+JiNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKtSURBVHgB7ZvPcdNAFMa/ZTjkhm/JLaYDUgFJBeAKCBUgVUCowKICSAemAlyCO8hySgwXc0ouZPn22WLEv4xs7W5g5vvNOJpV5Iz10763Ty+yO2hCQDrmV5U7QWb4mS+4GSMN/gEEJAGSYEgCJMGQBEiCIQmQBEMSIAmGJEASDEmAJBiSAEkwJAGSYEgCJMGQBEiCIQmQBOMh0jI+mIZTZIb/Mhs5pCO5BDi8Q2ZSCogoHCAJhiRAEgxJgCQYkgBJMCQBkmBIAiTBkARIgnGfEuZsDLz8FnAUtxx73BOp+wm9cAH1Ze2azq4FmzFz5zBlw+Q5ClN+JvCq/yLAuKqdv+bv2DCZoTDFJPAKr/jjhCf7/m/HrGq3uqzchDPlLQpSSoK/XQuY9zmYM6WisDcoRAkJPs6AL7VbbPMmCjsrJSKrBMb3YhMCHjsQRXAGTSyUMpJPQsD59QABLZ9rN4uhhIxLaBYJgYmNJ38aEx0SYKGUUUR6CYzjZUxsibEZlUlEUgmxCLKEloko4oYVZoi5JiFJJGxqgD8WQamJIbas3FHKWiJF2RxrgEmfJXA0DaM9btrxDc8pnhRL5nH3uD7JNNYSfN+KS9BrDGToTNiqBqCAhh/6on1xvM4dDh+7+3lyx33+Xgw9JuEaAxkiwSPBEjgUJuHG7kQHJMydJbj1MujxDxBn4u2AGbFzTggOr/abcEgZXzu7/V03SDGBus4V61SCHlsQn4HYPKMwYvgccteY4yfYEaevCcMXbarYUywOT9sxp/CHWBbvT0PDhsqjHwey4CoZaqU7S8d8vWgHTEifuJlRwDP8fGXPUbDdpkYrJMEoGg6sEKu9gLPO2FaHeNfpOpUkCneei0rY3Fr/dnu9LHDPcRcKB0iCIQmQBEMSEFeHgMf431j3GpPxHWSq7xBvwxLFAAAAAElFTkSuQmCC\"","import { message, notification } from 'antd'\r\n\r\nexport const formatPrice = (price: number, round = true) => {\r\n    const formattedPrice = round\r\n        ? Math.round(price/100)\r\n        : price / 100\r\n    ;\r\n    return `£${formattedPrice}` \r\n}\r\n\r\nexport const iconColor = \"#1890ff\"\r\n\r\nexport const displaySuccessNotification = (message: string, description?: string) => {\r\n    return notification[\"success\"]({\r\n        message,\r\n        description,\r\n        placement: \"topLeft\",\r\n        duration: 3,\r\n        style: {\r\n            marginTop: 50\r\n        }\r\n    })\r\n}\r\n\r\nexport const displayErrorMessage = (error: string) => {\r\n    return message.error(error)\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link, withRouter, RouteComponentProps } from 'react-router-dom'\r\nimport { Layout, Input } from 'antd'\r\nimport logo from './assets/tinyhouse-logo.png'\r\nimport { AppHeaderMenuItems } from '.'\r\nimport { Viewer } from '../../lib/types'\r\nimport { displayErrorMessage } from '../../lib/utils'\r\n\r\nconst { Header } = Layout\r\nconst { Search } = Input\r\n\r\ninterface Props {\r\n    viewer: Viewer\r\n    setViewer: (viewer: Viewer) => void\r\n}\r\nexport const AppHeader = withRouter(\r\n  ({ viewer, setViewer, history, location }: Props & RouteComponentProps) => {\r\n    const [search, setSearch] = useState('')\r\n\r\n    useEffect(() => {\r\n      const { pathname } = location\r\n      if (pathname.includes('/listings/')) {\r\n        const parts = pathname.split('/')\r\n        setSearch(parts[parts.length - 1])\r\n      } else {\r\n        setSearch('')\r\n      }\r\n    }, [location]) // runs if location changes\r\n\r\n    const onSearch = (value: string) => {\r\n      // amazing: it works\r\n      // how is the 'value' argument passed?\r\n      // console.log({value})\r\n      const trimmedValue = value.trim()\r\n      if (trimmedValue) {\r\n        history.push(`/listings/${trimmedValue}`)\r\n        window.location.reload()\r\n      } else {\r\n        displayErrorMessage(\"Please enter a valid search!\")\r\n      }\r\n    }\r\n\r\n    return (\r\n        <Header className=\"app-header\">\r\n            <div className=\"app-header__logo-search-section\">\r\n                <div className=\"app-header__logo\">\r\n                    <Link to=\"/\">\r\n                        <img src={logo} alt=\"tinyhouse logo\" />\r\n                    </Link>\r\n                </div>\r\n                <div className=\"app-header__search-input\">\r\n                  <Search\r\n                    placeholder=\"Search 'San Franciso'\"\r\n                    enterButton\r\n                    onSearch={onSearch}\r\n                    value={search}\r\n                    onChange={e => setSearch(e.target.value)}\r\n                  />\r\n                </div>\r\n            </div>\r\n            <div className=\"app-header__menu-section\">\r\n                <AppHeaderMenuItems viewer={viewer} setViewer={setViewer} />\r\n            </div>\r\n        </Header>\r\n    )\r\n  }\r\n)","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { Avatar, Button,  Menu } from 'antd'\r\nimport { HomeOutlined, UserOutlined, LogoutOutlined } from '@ant-design/icons'\r\nimport { Viewer } from '../../lib/types'\r\nimport { LOG_OUT, LogOut as LogOutData } from '../../lib/graphql/mutations'\r\nimport { displayErrorMessage, displaySuccessNotification } from '../../lib/utils'\r\n\r\nconst { Item, SubMenu } = Menu\r\n\r\ninterface Props {\r\n    viewer: Viewer\r\n    setViewer: (viewer: Viewer) => void\r\n}\r\nexport const AppHeaderMenuItems = ({ viewer, setViewer }: Props) => {\r\n\r\n    const [logOut] = useMutation<LogOutData>(LOG_OUT, {\r\n        onCompleted: (data) => {\r\n            if (data && data.logOut) {\r\n                setViewer(data.logOut)\r\n                sessionStorage.removeItem('token')\r\n                displaySuccessNotification('Logged out successfully')\r\n            }\r\n        },\r\n        onError: data => displayErrorMessage('Log out failed. Try again!')\r\n    })\r\n    const handleLogOut = () => logOut()\r\n\r\n    const subMenuLogin = viewer.id && viewer.avatar\r\n        ? (\r\n            <SubMenu title={<Avatar src={viewer.avatar} />}>\r\n                <Item key=\"/user\">\r\n                    <Link to={'/user/' + viewer.id}>\r\n                        <UserOutlined />\r\n                        Profile\r\n                    </Link>\r\n                </Item>\r\n                <Item key=\"/logout\">\r\n                    <div onClick={handleLogOut}>\r\n                        <LogoutOutlined />\r\n                        Logout\r\n                    </div>\r\n                </Item>\r\n            </SubMenu>\r\n          )\r\n        : (\r\n            <Item>\r\n                <Link to=\"/login\">\r\n                    <Button type=\"primary\">Sign In</Button>\r\n                </Link>\r\n            </Item>\r\n          )\r\n    ;\r\n\r\n    return (\r\n        <Menu mode=\"horizontal\" selectable={false} className=\"menu\">\r\n            <Item key=\"/host\">\r\n                <Link to=\"/host\">\r\n                    <HomeOutlined />\r\n                    Host\r\n                </Link>\r\n            </Item>\r\n            {subMenuLogin}\r\n        </Menu>\r\n    )\r\n}","import React from 'react'\r\nimport { Layout } from 'antd'\r\nimport logo from './assets/tinyhouse-logo.png'\r\n\r\nconst { Header } = Layout\r\n\r\nexport const AppHeaderSkeleton = () => {\r\n    return (\r\n        <Header className=\"app-header\">\r\n            <div className=\"app-header__logo-search-section\">\r\n                <div className=\"app-header__logo\">\r\n                   <img src={logo} alt=\"tinyhouse logo\" />\r\n                  </div>\r\n            </div>\r\n        </Header>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/map-background.c8201cdd.jpg\";","export default __webpack_public_path__ + \"static/media/san-francisco.bc8599ab.jpg\";","export default __webpack_public_path__ + \"static/media/cancun.7009e472.jpg\";","import React from 'react'\r\nimport { Link, RouteComponentProps } from 'react-router-dom'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { Col, Row, Layout, Typography } from 'antd'\r\nimport { HomeHero, HomeListings, HomeListingsSkeleton } from '.'\r\nimport { displayErrorMessage } from '../../lib/utils'\r\nimport { \r\n  LISTINGS, Listings as ListingsData, ListingsVariables\r\n} from '../../lib/graphql/queries'\r\nimport { ListingsFilter } from '../../lib/graphql/globalTypes'\r\n\r\nimport mapBackground from './assets/map-background.jpg'\r\nimport sanFrancisco from './assets/san-francisco.jpg'\r\nimport cancun from './assets/cancun.jpg'\r\n\r\n\r\nconst { Content } = Layout\r\nconst { Paragraph, Title } = Typography\r\n\r\nconst PAGE_LIMIT = 4\r\nconst PAGE_NUMBER = 1\r\n\r\nexport const Home = ({ history }: RouteComponentProps) => {\r\n\r\n  const onSearch = (value: string) => {\r\n    const trimmedValue = value.trim()\r\n    if (trimmedValue){\r\n      history.push(`/listings/${trimmedValue}`)\r\n    } else {\r\n      displayErrorMessage('Please enter a location first!')\r\n    }\r\n  }\r\n\r\n  const { loading, data } = useQuery<ListingsData, ListingsVariables>(\r\n    LISTINGS, \r\n    { variables: {\r\n        filter: ListingsFilter.PRICE_HIGH_TO_LOW,\r\n        limit: PAGE_LIMIT,\r\n        page: PAGE_NUMBER\r\n    }}\r\n  )\r\n  \r\n  const renderListingSection = () => {\r\n    if (loading) {\r\n      return <HomeListingsSkeleton />\r\n    }\r\n    if (data) {\r\n      return (\r\n        <HomeListings \r\n        title=\"Premium Listings\" listings={data.listings.result} />\r\n      )\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Content \r\n      className=\"home\" \r\n      style={{ backgroundImage: `url(${mapBackground})`}}\r\n    >\r\n      <HomeHero onSearch={onSearch}/>\r\n\r\n      <div className=\"home__cta-section\">\r\n        <Title className=\"home__cta-section-title\">\r\n          Your guide for all things rental\r\n        </Title>\r\n        <Paragraph>\r\n          Helping you make the best decisions for your last minute locations.\r\n        </Paragraph>\r\n        <Link\r\n          to=\"/listings/united%20states\"\r\n          className=\"ant-btn ant-btn-primary ant-btn-large home__cta-section-button\"\r\n        >\r\n          Popular listings in the United States\r\n        </Link>\r\n      </div>\r\n\r\n      {renderListingSection()}\r\n\r\n      <div className=\"home__lisitngs\">\r\n        <Title level={4} className=\"home__listings-title\">\r\n          Listings of any kind\r\n        </Title>\r\n        <Row gutter={12}>\r\n          <Col xs={24} sm={12}>\r\n            <Link to=\"/listings/san%20francisco\">\r\n            <div className=\"home__listings-img-cover\">\r\n              <img src={sanFrancisco} alt=\"San Francisco\" className=\"home__listings-img\" />\r\n            </div>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={24} sm={12}>\r\n            <Link to=\"/listings/cancun\">\r\n            <div className=\"home__listings-img-cover\">\r\n              <img src={cancun} alt=\"Cancun\" className=\"home__listings-img\" />\r\n            </div>\r\n            </Link>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n\r\n    </Content>\r\n  ) \r\n}","export default __webpack_public_path__ + \"static/media/toronto.5c221cf7.jpg\";","export default __webpack_public_path__ + \"static/media/dubai.a6c56bca.jpg\";","export default __webpack_public_path__ + \"static/media/los-angeles.44220702.jpg\";","export default __webpack_public_path__ + \"static/media/london.16fb9b9d.jpg\";","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Card, Col, Row, Input, Typography } from 'antd'\r\n\r\nimport toronto from './assets/toronto.jpg'\r\nimport dubai from './assets/dubai.jpg'\r\nimport losAngeles from './assets/los-angeles.jpg'\r\nimport london from './assets/london.jpg'\r\n\r\nconst { Title } = Typography\r\nconst { Search } = Input\r\n\r\ninterface Props {\r\n  onSearch: (value: string) => void\r\n}\r\nexport const HomeHero = ({ onSearch }: Props) => {\r\n\r\n  return (\r\n    <div className=\"home-hero\">\r\n\r\n      <div className=\"home-hero__search\">\r\n        <Title className=\"home-hero__title\">\r\n          Find a place you'll love to stay at\r\n        </Title>\r\n        <Search \r\n          placeholder=\"Search 'San Francisco'\" \r\n          size=\"large\"\r\n          enterButton\r\n          className=\"home-hero__search-input\"\r\n          onSearch={onSearch}\r\n        />\r\n      </div>\r\n      \r\n      <Row gutter={12} className=\"home-hero__cards\">\r\n        <Col xs={12} md={6}>\r\n          <Link to=\"/listings/toronto\">\r\n            <Card cover={<img src={toronto} alt=\"Toronto\" />}>\r\n              Toronto\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <Link to=\"/listings/dubai\">\r\n            <Card cover={<img src={dubai} alt=\"Dubai\" />}>\r\n              Dubai\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={0} md={6}>\r\n          <Link to=\"/listings/los%20angeles\">\r\n            <Card cover={<img src={losAngeles} alt=\"Los Angeles\" />}>\r\n              Los Angeles\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={0} md={6}>\r\n          <Link to=\"/listings/london\">\r\n            <Card cover={<img src={london} alt=\"London\" />}>\r\n              London\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\nimport { Alert } from 'antd'\r\n\r\ninterface Props {\r\n    message?: string\r\n    description?: string \r\n    nextAction?: () => void\r\n}\r\n\r\nexport const ErrorBanner = ({\r\n    message = 'Uh oh! Somethings went wrong :( ',\r\n    description = 'Please try again later.',\r\n    nextAction\r\n}: Props) => {\r\n    return (\r\n        <Alert\r\n            banner={false}\r\n            closable\r\n            message={message}\r\n            description={description}\r\n            type=\"error\"\r\n            className=\"error-banner\"\r\n            onClose={nextAction}\r\n        />\r\n    )\r\n}","import React from 'react'\r\nimport { Skeleton } from 'antd'\r\n\r\nexport const PageSkeleton = () => {\r\n    const skeletonParagraph = (\r\n        <Skeleton \r\n            active \r\n            paragraph={{ rows: 4 }} \r\n            className=\"page-skeleton__paragraph\"\r\n        />\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {skeletonParagraph}\r\n            {skeletonParagraph}\r\n            {skeletonParagraph}\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Card, Typography } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons' \r\nimport { iconColor, formatPrice } from '../utils'\r\n\r\ninterface Props {\r\n    listing: {\r\n        id: string\r\n        title: string\r\n        image: string\r\n        address: string\r\n        price: number\r\n        numOfGuests: number\r\n    }\r\n}\r\n\r\nconst { Text, Title } = Typography\r\n\r\nexport const ListingCard = ({ listing }: Props) => {\r\n\r\n    const { id, title, image, address, price, numOfGuests } = listing\r\n\r\n    return (<Link to={'/listing/' + id}>\r\n\r\n        <Card \r\n            hoverable \r\n            cover={\r\n                <div \r\n                    style={{backgroundImage: `url(${image})`}} \r\n                    className=\"listing-card__cover-img\"    \r\n                />\r\n            }     \r\n        >\r\n            <div className=\"listing-card__details\">\r\n                <div className=\"listing-card__description\">\r\n                    <Title level={4} className=\"listing-card__price\">\r\n                        {formatPrice(price)}\r\n                        <span>/day</span>\r\n                    </Title>\r\n                    <Text strong ellipsis className=\"listing-card__title\">\r\n                        {title}\r\n                    </Text>\r\n                    <Text ellipsis className=\"listing-card__address\">\r\n                        {address}\r\n                    </Text>\r\n                    <div className=\"listing-card__dimensions listing-card__dimensions--guests\">\r\n                        <UserOutlined \r\n                            style={{\r\n                                color: iconColor,\r\n                                paddingRight: '6px',\r\n                            }}\r\n                        />\r\n                        <Text>{numOfGuests} guests</Text>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Card>\r\n\r\n    </Link>)\r\n}","import React from 'react'\r\nimport { List, Typography } from 'antd'\r\nimport { ListingCard } from '../../lib/components'\r\nimport { Listings } from '../../lib/graphql/queries'\r\n\r\nconst { Title } = Typography\r\n\r\ninterface Props {\r\n  title: string\r\n  listings: Listings['listings']['result']\r\n}\r\nexport const HomeListings = ({ title, listings }: Props) => {\r\n  return (\r\n    <div className=\"home-listings\">\r\n      <Title className=\"home-listings__title\">{title}</Title>\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 4,\r\n          lg: 4,\r\n          xl: 4,\r\n          xxl: 4,\r\n        }} \r\n        dataSource={listings}\r\n        renderItem={listing => (\r\n          <List.Item>\r\n            <ListingCard listing={listing} />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Card, List, Skeleton } from 'antd'\r\nimport loadingCard from './assets/listing-loading-card-cover.jpg'\r\n\r\nexport const HomeListingsSkeleton = () => {\r\n\r\n  const fourEmptyObjects = [{}, {}, {}, {}]\r\n\r\n  return (\r\n    <div className=\"home-listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 0}} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 4,\r\n          lg: 4,\r\n          xl: 4,\r\n          xxl: 4,\r\n        }} \r\n        dataSource={fourEmptyObjects}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card \r\n              \r\n              cover={\r\n                <div \r\n                  style={{ backgroundImage: `url(${loadingCard})` }}\r\n                  className=\"home-listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading \r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","export default \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","import React, { useState, FormEvent } from 'react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { \r\n  Button, Form, Input, InputNumber, Layout, Radio, Typography, Upload \r\n} from 'antd'\r\n//import { FormComponentProps } from 'antd/lib/form'\r\nimport { Viewer } from '../../lib/types'\r\nimport { ListingType } from '../../lib/graphql/globalTypes'\r\nimport { \r\n  HomeTwoTone, AppstoreTwoTone, PlusOutlined, LoadingOutlined,  \r\n} from '@ant-design/icons'\r\nimport { displayErrorMessage, displaySuccessNotification, iconColor } from '../../lib/utils'\r\nimport { UploadChangeParam } from 'antd/lib/upload'\r\nimport {\r\n  HOST_LISTING, HostListing as HostListingData, HostListingVariables\r\n} from '../../lib/graphql/mutations'\r\n\r\n\r\nconst { Content } = Layout\r\nconst { Text, Title } = Typography\r\nconst { Item } = Form\r\n\r\ninterface Props {\r\n  viewer: Viewer\r\n\r\n}\r\nexport const Host = ({ viewer }: Props) => {\r\n\r\n  const [imageLoading, setImageLoading] = useState(false)\r\n  const [imageBase64, setImageBase64] = useState<string | null>(null)\r\n\r\n  const [hostListing, { loading, data }] = \r\n  useMutation<HostListingData, HostListingVariables>(HOST_LISTING,\r\n    {\r\n      onCompleted: () => {\r\n        displaySuccessNotification('Listing sucessfully created!')\r\n\r\n      },\r\n      onError: () => displayErrorMessage(\r\n        \"Sorry! We weren't able to create your listing. Please try agan later.\"\r\n      )\r\n    }\r\n  ) \r\n\r\n\r\n  const [form] = Form.useForm()\r\n\r\n  if (!viewer || !viewer.hasWallet) {\r\n    return (\r\n      <Content className=\"host-content\">\r\n        <div className=\"host__form-header\">\r\n          <Title level={4} className=\"host__form-title\">\r\n            You'll have to be signed in and connected to Stripe to host a listing!\r\n          </Title>\r\n          <Text type=\"secondary\">\r\n            We only allow users who've signed in to our application and have connected to Stripe to host a new listing.\r\n            You can sign in at the <Link to=\"/login\">login</Link> page and connect with Stripe shortly after.\r\n          </Text>\r\n        </div>\r\n      </Content>  \r\n    )\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"host-content\">\r\n        <div className=\"host__form-header\">\r\n          <Title level={3} className=\"host__form-title\">\r\n             Please wait!\r\n          </Title>\r\n          <Text type=\"secondary\">We are creating your listing now.</Text>\r\n        </div>\r\n      </Content>  \r\n    )\r\n  }\r\n\r\n  if (data && data.hostListing) {\r\n    return (\r\n      <Redirect to={`/listings/${data.hostListing.id}`} />\r\n    )\r\n  }\r\n\r\n  const handleImageUpload = (info: UploadChangeParam) => {\r\n   \r\n    const { file } = info\r\n\r\n    if (file.status === 'uploading') {\r\n      setImageLoading(true)\r\n      return\r\n    }  \r\n\r\n\r\n    if (file.status === 'done' && file.originFileObj) {\r\n        getBase64(file.originFileObj, imageBase64 => {\r\n          setImageBase64(imageBase64)\r\n          setImageLoading(false)\r\n      })  \r\n    }\r\n  }\r\n \r\n  \r\n\r\n  const submitHostListing = (evt: FormEvent) => {\r\n    form.validateFields().then(values => {\r\n      const { address, city, state, zip, price } = values\r\n      const fullAddress = `${address}, ${city}, ${state}, ${zip}`\r\n      delete values.city\r\n      delete values.state\r\n      delete values.zip\r\n\r\n      const input = {\r\n        ...values,\r\n        address: fullAddress,\r\n        image: imageBase64, //'ShortButFakeBase64Image', //\r\n        price: price * 100,\r\n      }\r\n\r\n      console.log(input)\r\n     \r\n      hostListing({ \r\n        variables: { input }\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Content className=\"host-content\">\r\n      <Form layout=\"vertical\" form={form} onFinish={submitHostListing}>\r\n        <div className=\"host__form-header\">\r\n          <Title level={3} className=\"host__form-title\">\r\n            Hi! Let's get started listing your place.\r\n          </Title>\r\n          <Text type=\"secondary\">\r\n            In this form we collect some basic and additional information about your listing.\r\n          </Text>\r\n        </div>\r\n\r\n        <Item label=\"Home Type\" name=\"type\" rules={[\r\n          {required: true, message: 'Please select a home type.'}\r\n        ]}>\r\n          <Radio.Group>\r\n            <Radio.Button value={ListingType.HOUSE}>\r\n              <HomeTwoTone style={{ paddingRight: \"1em\" }}/>\r\n              <span>House</span>\r\n            </Radio.Button>\r\n            <Radio.Button value={ListingType.APARTMENT}>\r\n              <AppstoreTwoTone style={{ paddingRight: \"1em\" }} />\r\n              Apartment\r\n            </Radio.Button>\r\n          </Radio.Group>\r\n        </Item>\r\n\r\n        <Item label=\"Max # of Guests\" name=\"numOfGuests\" rules={[\r\n          {required: true, message: 'Please select the maximum number of guests.'}\r\n        ]}>\r\n          <InputNumber min={1} placeholder=\"4\" />\r\n        </Item>\r\n\r\n        <Item label=\"Titel\" extra=\"max. 45 characters\" name=\"title\" rules={[\r\n          {required: true, message: 'Please enter a title for you listing.'}\r\n        ]}>\r\n          <Input maxLength={45} placeholder=\"The iconic and luxurious Bel-Air mansion\" />\r\n        </Item>\r\n        \r\n        <Item label=\"Description of your listing\" extra=\"max. 400 characters\" \r\n          name=\"description\" rules={[\r\n          {required: true, message: 'Please enter a description for your listing.'}\r\n        ]}>\r\n          <Input.TextArea \r\n            rows={3} \r\n            maxLength={400} \r\n            placeholder=\"Modern, clean and iconic home of the Fresh Prince. Situated in the heart of Bel-Ait, Los Angeles.\"\r\n          />\r\n        </Item>\r\n        \r\n        <Item label=\"Address\" name=\"address\" rules={[\r\n          {required: true, message: 'Please enter a street address.'}\r\n        ]}>\r\n          <Input placeholder=\"351 North Bristol Avenue\" />\r\n        </Item>\r\n\r\n        <Item label=\"City/Town\" name=\"city\" rules={[\r\n          {required: true, message: 'Please enter the city for your listing.'}\r\n        ]}>\r\n          <Input placeholder=\"Los Angeles\" />\r\n        </Item>\r\n\r\n        <Item label=\"State/Provice\" name=\"state\" rules={[\r\n          {required: true, message: 'Please enter a state or province for your listing.'}\r\n        ]}>\r\n          <Input placeholder=\"California\" />\r\n        </Item>\r\n\r\n        <Item label=\"Zip/Postal Code\" name=\"zip\" rules={[\r\n          {required: true, message: 'Please enter a zip (postcode).'}\r\n        ]}>\r\n          <Input placeholder=\"Please enter a zip code for your listing\" />\r\n        </Item>\r\n\r\n        <Item label=\"Image\" name=\"image\" extra=\"max. 1 MB and of type JPG or PNG\" \r\n          rules={[\r\n            {required: true, message: 'Please provide an image for your listing.'}\r\n          ]}\r\n        >\r\n          <div className=\"host__form-image-upload\">\r\n            <Upload \r\n              name=\"image\" \r\n              listType=\"picture-card\" \r\n              showUploadList={false}\r\n              //action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n              action=\"/statusDone\"\r\n              beforeUpload={beforeImageUpload}\r\n              onChange={handleImageUpload}\r\n            >\r\n              {imageBase64 ? (\r\n                <img src={imageBase64} alt=\"Listing\" />\r\n              ) : (\r\n                <div>\r\n                  {imageLoading ? (\r\n                    <LoadingOutlined style={{color: iconColor}} />\r\n                  ) : (\r\n                    <PlusOutlined style={{color: iconColor}}/>\r\n                  )} \r\n                  <div className=\"ant-upload-text\">Upload</div>\r\n                </div>\r\n              )}\r\n            </Upload>\r\n          </div>\r\n        </Item>\r\n\r\n        <Item label=\"Price\" extra=\"All prices in GBP (£) per day\" name=\"price\"\r\n          rules={[{required: true, message: 'Please enter a price.'}]}\r\n        >\r\n          <InputNumber min={0} placeholder=\"120\" />\r\n        </Item>\r\n\r\n        <Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">Submit</Button>\r\n        </Item>\r\n      </Form>\r\n    </Content>  \r\n  )\r\n}\r\n\r\n\r\nconst beforeImageUpload = (file: File) => {\r\n  const wrongType = file.type !== \"image/jpeg\" && file.type !== \"image/png\" \r\n  const worngSize = file.size > 2 * 1024 * 1024\r\n\r\n  let text = ''\r\n  if (wrongType) text += 'Image not of type JPG or PNG. '\r\n  if (worngSize) text += 'Image size greater than 2 MB. '\r\n  if (text.length) {\r\n    displayErrorMessage(text)\r\n    return false\r\n  }\r\n\r\n  return true\r\n} \r\n\r\nconst getBase64 = (\r\n  img: File | Blob,\r\n  callback: (imageBase64: string) => void  \r\n) => {\r\n  const reader = new FileReader()\r\n  //reader.addEventListener('load', () => callback(reader.result as string))\r\n  reader.readAsDataURL(img)\r\n  reader.onload = () => callback(reader.result as string)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { Layout, Col, Row  } from 'antd'\r\nimport { Moment } from 'moment'\r\nimport { ErrorBanner, PageSkeleton } from '../../lib/components'\r\nimport { LISTING, Listing as ListingData, ListingVariables } from '../../lib/graphql/queries'\r\nimport { \r\n  ListingBookings, \r\n  ListingCreateBooking, \r\n  WrappedListingCreateBookingModal as ListingCreateBookingModal,\r\n  ListingDetails \r\n} from '.'\r\nimport { Viewer } from '../../lib/types'\r\n\r\nconst PAGE_LIMIT = 3\r\nconst { Content } = Layout\r\n\r\ninterface MatchParams {\r\n  id: string\r\n}\r\ninterface Props {\r\n  viewer: Viewer\r\n}\r\n\r\nexport const Listing = (\r\n  { viewer, match }: Props & RouteComponentProps<MatchParams>\r\n) => {\r\n\r\n  const [bookingsPage, setBookingsPage] = useState(1)\r\n  const [checkInDate,   setCheckInDate] = useState<Moment | null>(null)\r\n  const [checkOutDate, setCheckOutDate] = useState<Moment | null>(null)\r\n  const [modalVisible, setModalVisible] = useState(false)\r\n\r\n  const { loading, data, error, refetch } = useQuery<ListingData, ListingVariables>(\r\n    LISTING,\r\n    { variables: {\r\n        id: match.params.id,\r\n        bookingsPage,\r\n        limit: PAGE_LIMIT\r\n    }}\r\n  )\r\n\r\n  const clearBooking = () => {\r\n    setModalVisible(false)\r\n    setCheckInDate(null)\r\n    setCheckOutDate(null)\r\n  }\r\n\r\n  const refetchListing = async () => {\r\n    await refetch()\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <PageSkeleton />\r\n      </Content>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <ErrorBanner description=\"Failed to query listing, try again!\" />\r\n        <PageSkeleton />\r\n      </Content>\r\n    )\r\n  }\r\n  \r\n  const listing = data ? data.listing : null\r\n  const listingBookings = listing ? listing.bookings : null\r\n\r\n  const listingDeatailsElement = listing ? (\r\n    <ListingDetails listing={listing} />\r\n  ) : null\r\n\r\n  const listingBookingElement = listingBookings ? (\r\n    <ListingBookings \r\n      listingBookings={listingBookings} \r\n      bookingsPage={bookingsPage}\r\n      limit={PAGE_LIMIT}\r\n      setBookingsPage={setBookingsPage}\r\n    />\r\n  ) : null\r\n\r\n  const listingCreateBookingElement = listing ? (\r\n    <ListingCreateBooking \r\n      viewer={viewer}\r\n      host={listing.host}\r\n      price={listing.price}\r\n      bookingsIndex={listing.bookingsIndex}\r\n      checkInDate={checkInDate}\r\n      checkOutDate={checkOutDate}\r\n      setCheckInDate={setCheckInDate}\r\n      setCheckOutDate={setCheckOutDate}\r\n      setModalVisible={setModalVisible}\r\n    /> \r\n  ) : null\r\n\r\n  const listingCreateBookingModalElement =\r\n    listing && checkInDate && checkOutDate ? (\r\n    <ListingCreateBookingModal \r\n      id={listing.id}\r\n      clearBooking={clearBooking}\r\n      refetchListing={refetchListing}\r\n      modalVisible={modalVisible}\r\n      setModalVisible={setModalVisible}\r\n      price={listing.price}\r\n      checkInDate={checkInDate}\r\n      checkOutDate={checkOutDate}\r\n    />\r\n  ) : null\r\n\r\n  return (\r\n    <Content className=\"listings\">\r\n      <Row gutter={24} justify=\"space-between\">\r\n        <Col xs={24} lg={14}>\r\n          {listingDeatailsElement}\r\n          {listingBookingElement}\r\n        </Col>\r\n        <Col xs={24} lg={10}>\r\n          {listingCreateBookingElement}\r\n        </Col>\r\n      </Row>\r\n      {listingCreateBookingModalElement}\r\n    </Content>\r\n  ) \r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Avatar, Divider, List, Typography } from 'antd'\r\nimport { Listing } from '../../lib/graphql/queries'\r\n\r\nconst { Text, Title } = Typography\r\n\r\ninterface Props {\r\n    listingBookings: Listing['listing']['bookings']\r\n    bookingsPage: number\r\n    limit: number\r\n    setBookingsPage: (page: number) => void\r\n}\r\nexport const ListingBookings = ({ \r\n  listingBookings, bookingsPage, limit, setBookingsPage\r\n}: Props ) => {\r\n\r\n  const total = listingBookings ? listingBookings.total : null\r\n  const result = listingBookings ? listingBookings.result : null\r\n\r\n  const listingBookingsList = listingBookings ? (\r\n    <List\r\n      grid={{\r\n        gutter: 8,\r\n        xs: 1,\r\n        sm: 2,\r\n        lg: 3,\r\n      }}\r\n      dataSource={result ? result : undefined}\r\n      locale={{\r\n        emptyText: \"No bookings have been made yet.\",\r\n      }}\r\n      pagination={{\r\n          current: bookingsPage,\r\n          total: total ? total : undefined,\r\n          defaultPageSize: limit,\r\n          hideOnSinglePage: true,\r\n          showLessItems: true,\r\n          onChange: (page: number) => setBookingsPage(page),\r\n      }}\r\n      renderItem={(listingBooking) => {\r\n        const bookingHistory = (\r\n          <div className=\"listing-bookings__bookings-history\">\r\n              <div>\r\n                  Ckeck in: <Text strong>{listingBooking.checkIn}</Text> \r\n              </div>\r\n              <div>\r\n                  Ckeck out: <Text strong>{listingBooking.checkOut}</Text> \r\n              </div>\r\n          </div>\r\n        )\r\n        return (\r\n          <List.Item>\r\n            {bookingHistory}\r\n            <Link to={`/user/${listingBooking.tenant.id}`}>\r\n              <Avatar src={listingBooking.tenant.avatar} size={64} shape=\"square\" />\r\n            </Link>\r\n          </List.Item>\r\n        )\r\n      }}\r\n    />\r\n  ) : null\r\n\r\n  return (\r\n    <div className=\"listing-bookings\">\r\n       <Divider />\r\n      <Title level={4} className=\"listing-bookings__title\">\r\n        Bookings\r\n      </Title>\r\n      {listingBookingsList \r\n        ? listingBookingsList \r\n        : <List locale={{ emptyText: 'No, no, no bookings, yet!' }} />\r\n      }\r\n    </div>\r\n  )\r\n}","import React, { useRef } from 'react'\r\nimport { Button, Card, DatePicker, Divider, Typography } from 'antd'\r\nimport moment, { Moment } from 'moment'\r\nimport { formatPrice, displayErrorMessage } from '../../lib/utils'\r\nimport { Listing as ListingData } from '../../lib/graphql/queries'\r\nimport { Viewer } from '../../lib/types'\r\n\r\nconst MAX_DAYS_TO_BOOK = 30\r\n\r\nconst { Paragraph, Text, Title } = Typography\r\n\r\ninterface Props {\r\n  host: ListingData[\"listing\"][\"host\"]\r\n  viewer: Viewer\r\n  price: number\r\n  bookingsIndex: ListingData[\"listing\"][\"bookingsIndex\"]\r\n  checkInDate: Moment | null\r\n  checkOutDate: Moment | null\r\n  setCheckInDate: (checkInDate: Moment | null) => void\r\n  setCheckOutDate: (checkOutDate: Moment | null) => void\r\n  setModalVisible: (modalVisible: boolean) => void\r\n}\r\nexport const ListingCreateBooking = ({ \r\n  host, viewer, price, bookingsIndex, checkInDate, checkOutDate, \r\n  setCheckInDate, setCheckOutDate, setModalVisible \r\n}: Props) => {\r\n\r\n  const bookingsIndexJson: BookingsIndex = JSON.parse(bookingsIndex)  \r\n\r\n  // for testing\r\n  //const bookingsIndex1 = '{\"2021\": {\"1\" : {\"25\": true, \"26\": true } } }'\r\n  //const bookingsIndexJson: BookingsIndex = JSON.parse(bookingsIndex1)\r\n\r\n  // const log = (context: string): void => {\r\n  //   console.log(' ')\r\n  //   const fmtCheckInDate = checkInDate === null ? 'null' : checkInDate.format('DD/MM/YYYY')\r\n  //   console.log(`[${context}]checkInDate: ${fmtCheckInDate}`)\r\n  //   const fmtCheckOutDate = checkOutDate === null ? 'null' : checkOutDate.format('DD/MM/YYYY')\r\n  //   console.log(`[${context}]checkOutDate: ${fmtCheckOutDate}`)\r\n  //   const fmtCheckin = refCheckin.current === null ? 'null' : refCheckin.current.format('DD/MM/YYYY')\r\n  //   console.log(`[${context}]refCheckin: ${fmtCheckin}`)\r\n  //   const fmtFirstBooking = refFirstBooking.current === null ? 'null' : refFirstBooking.current.format('DD/MM/YYYY')\r\n  //   console.log(`[${context}]refFirstBooking: ${fmtFirstBooking}`)\r\n  // } \r\n\r\n  const refCheckin = useRef<Moment | null>(null) \r\n  const refFirstBooking = useRef<Moment | null>(null)\r\n  \r\n  const onCheckInChange = (date: Moment | null) => {\r\n    setCheckInDate(date)    // for parent component\r\n    refCheckin.current = date === null ? null : date  // internal\r\n    refFirstBooking.current = firstBooking(date)\r\n    //log('onCheckin')\r\n  }\r\n  \r\n  const disabledCheckInDate = (gridDate: Moment): boolean =>  {\r\n    if (!gridDate) return true\r\n    return gridDate.isBefore(moment()) || isBooked(gridDate)\r\n  }\r\n    \r\n  const disabledCheckOutDate = (gridDate: Moment) => {\r\n    return gridDate.isBefore(refCheckin.current) || gridDate.isAfter(refFirstBooking.current)\r\n  }\r\n \r\n  const verifyDates = (): boolean => {\r\n    // log('verify start')\r\n    // obsolete because Button would be diabled\r\n    if (!checkInDate || !checkOutDate) {\r\n      displayErrorMessage('CheckIn and/or CheckOut date missing!')\r\n      return false\r\n    } \r\n    // obsolete because onChange Checkin sets Ckeckout to null\r\n    if (!moment(checkInDate).isBefore(checkOutDate, 'days')){\r\n      displayErrorMessage('CheckOut has to be after CheckIn!')\r\n      return false\r\n    } \r\n    if (checkInDate === checkOutDate) {\r\n      displayErrorMessage('You have to stay at least for 1 night!')\r\n      setCheckInDate(null)\r\n      setCheckOutDate(null)\r\n      return false\r\n    }\r\n    if (periodContainsAlreadyBookedDays(checkInDate, checkOutDate)){\r\n      displayErrorMessage('You included days wich were already booked. - Try again!')\r\n      setCheckInDate(null)\r\n      setCheckOutDate(null)\r\n      return false\r\n    }\r\n    // log('verify end')\r\n    return true\r\n  }\r\n\r\n  const isBooked = (date: Moment): boolean => {\r\n    const year = moment(date).year()\r\n    const month = moment(date).month()\r\n    const day = moment(date).date()\r\n    if (!bookingsIndexJson[year]) return false  \r\n    if (!bookingsIndexJson[year][month]) return false\r\n    if (!bookingsIndexJson[year][month][day]) return false\r\n    return true\r\n  }\r\n  \r\n  const periodContainsAlreadyBookedDays = (strt: Moment, ende: Moment): boolean => {\r\n    const d = moment(strt)\r\n    while (d.isBefore(ende)) {\r\n      d.add(1, 'd')\r\n      //log('period loop')\r\n      if (isBooked(d)) return true\r\n    }\r\n    //log('period sucess')\r\n    return false\r\n  }\r\n\r\n  const firstBooking = (strt: Moment | null): Moment | null => {\r\n    if (strt == null) {\r\n      return null\r\n    }\r\n    const d = moment(strt)\r\n    // const d = strt \r\n    // would make d the same object as strt, which in turn is the same as refCheckin\r\n    // increasing d then increases refCheckin \r\n    // this took me three days to figure out\r\n    // =====================================\r\n    const ende = moment(strt).add(MAX_DAYS_TO_BOOK, 'd')\r\n    while (d.isBefore(ende)) {\r\n      d.add(1, 'd')\r\n      if (isBooked(d)) return d\r\n    }\r\n    return d\r\n  }\r\n\r\n  const handleRequestToBook = () => {\r\n    if (verifyDates()) {\r\n      setModalVisible(true)\r\n    } \r\n  }\r\n\r\n  let buttonMessage = \"You will not be charged yet!\"\r\n  let disableCheckin = false\r\n  if (!viewer.id) {\r\n    buttonMessage = \"You have to be signed in to book a listing!\"\r\n    disableCheckin = true\r\n  }\r\n  if (viewer.id === host.id) {\r\n    buttonMessage = \"You cannot book your own listing!\"\r\n    disableCheckin = true\r\n  }\r\n  if (!host.hasWallet) {\r\n    buttonMessage = \"The host has disconnected from Stripe and thus will not be able to receive payments!\"\r\n    disableCheckin = true\r\n  }\r\n\r\n  return (\r\n    <div className=\"listing-booking\">\r\n      <Card className=\"listing-booking__card\">\r\n        <div>\r\n          <Paragraph>\r\n            <Title level={2} className=\"listing-booking__card-title\">\r\n              {formatPrice(price)}\r\n              <span>/day</span>\r\n            </Title>\r\n          </Paragraph>\r\n          <Divider />\r\n          <div className=\"listing-booking__card-date-picker\">\r\n            <Paragraph strong>Check In</Paragraph>\r\n            <DatePicker \r\n              disabled={disableCheckin}\r\n              value={checkInDate ? checkInDate : undefined} \r\n              format={'dddd DD/MM/YYYY'}\r\n              showToday={false}\r\n              disabledDate={disabledCheckInDate} \r\n              onChange={date => onCheckInChange(date)}\r\n              onOpenChange={() => setCheckOutDate(null)}\r\n            />\r\n          </div>\r\n          <div className=\"listing-booking__card-date-picker\">\r\n            <Paragraph strong>Check Out</Paragraph>\r\n            <DatePicker \r\n              disabled = {checkInDate === null}\r\n              value={checkOutDate ? checkOutDate : undefined}\r\n              format={'dddd DD/MM/YYYY'}\r\n              showToday={false}\r\n              disabledDate={disabledCheckOutDate} \r\n              onChange={date => setCheckOutDate(date)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <Divider />\r\n        <Button \r\n          disabled={!checkInDate || !checkOutDate}\r\n          size=\"large\" \r\n          type=\"primary\" \r\n          className=\"listing-booking__card-cta\"\r\n          onClick={handleRequestToBook}\r\n        >\r\n          Request to book!\r\n        </Button>\r\n        <Text type=\"secondary\">{buttonMessage}</Text>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n//types\r\ninterface Month {\r\n  [key: string]: boolean\r\n}\r\ninterface Year {\r\n  [key: string]: Month\r\n}\r\ninterface BookingsIndex {\r\n  [key: string]: Year\r\n}","import React from 'react'\r\nimport { CardElement, injectStripe, ReactStripeElements } from 'react-stripe-elements'\r\nimport { Modal, Button, Divider, Typography } from 'antd'\r\nimport { KeyOutlined } from '@ant-design/icons'\r\nimport { Moment } from 'moment'\r\nimport { formatPrice, displayErrorMessage, displaySuccessNotification } from '../../lib/utils'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { \r\n  CREATE_BOOKING, CreateBooking as CreateBookingData, CreateBookingVariables\r\n} from '../../lib/graphql/mutations'\r\n\r\n\r\nconst { Paragraph, Text, Title } = Typography\r\n\r\ninterface Props {\r\n  id: string\r\n  clearBooking: () => void\r\n  refetchListing: () => Promise<void>\r\n  modalVisible: boolean\r\n  setModalVisible: (modalVisble: boolean) => void\r\n  price: number\r\n  checkInDate: Moment\r\n  checkOutDate: Moment\r\n}\r\n\r\nexport const ListingCreateBookingModal = ({ \r\n  id, clearBooking, refetchListing,\r\n  modalVisible, setModalVisible, price, checkInDate, checkOutDate, stripe \r\n}: Props & ReactStripeElements.InjectedStripeProps) => {\r\n\r\n  const [createBooking, { loading }] = \r\n    useMutation<CreateBookingData, CreateBookingVariables>(\r\n      CREATE_BOOKING,\r\n      { onCompleted: () => {\r\n          clearBooking()\r\n          displaySuccessNotification(\r\n            'You sucessfully booked the listing.',\r\n            'Your booking history can be found in your User page.'\r\n          )\r\n          refetchListing()\r\n        },\r\n        onError: () => displayErrorMessage('Sorry, something went wrong, please try again!')\r\n      }\r\n    )\r\n\r\n  const daysBooked = checkOutDate.diff(checkInDate, 'd')\r\n  const listingPrice = price * daysBooked\r\n\r\n  const handleCreateBooking = async () => {\r\n    if (!stripe) {\r\n      displayErrorMessage(\"Sorry! We were not able to conntect with Stripe.\")\r\n      return\r\n    }\r\n\r\n    let { token: stripeToken, error } = await stripe.createToken()\r\n    if (stripeToken) {\r\n      createBooking({\r\n        variables: {\r\n          input: {\r\n            listingId: id,  \r\n            source: stripeToken.id,\r\n            checkIn: checkInDate.format('YYYY-MM-DD'),\r\n            checkOut: checkOutDate.format('YYYY-MM-DD')\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      const text = (error && error.message) ? (\r\n        error.message\r\n       ) : 'Sorry, something went wrong, please try again later!'\r\n      \r\n      displayErrorMessage(text)\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      visible={modalVisible}\r\n      centered\r\n      footer={null}\r\n      onCancel={() => setModalVisible(false)}\r\n    >\r\n      <div className=\"listing-booking-modal\">\r\n        <div className=\"listing-booking-modal__intro\">\r\n          <Title className=\"listing-booking-modal__intro-title\">\r\n            Book your trip\r\n          </Title>\r\n          <Title className=\"listing-booking-modal__intro-title\">\r\n            <KeyOutlined />\r\n          </Title>\r\n         \r\n          <Paragraph>\r\n            Enter your payment information to book the listing <br />\r\n            from \r\n            {'  '}<Text mark strong>{checkInDate.format('DD/MM/YY')}</Text>\r\n            {'  '} to\r\n            {'  '}<Text mark strong>{checkOutDate.format('DD/MM/YY')}</Text>\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Divider />\r\n        \r\n        <div className=\"listing-booking-modal__charge-summary\">\r\n          <Paragraph>\r\n            {formatPrice(price, false)} * {daysBooked} days = {' '}\r\n            <Text strong>{formatPrice(listingPrice, false)}</Text>\r\n          </Paragraph>\r\n          <Paragraph className=\"listing-booking-modal__charge-summary-total\">\r\n            Total = <Text strong mark>{formatPrice(listingPrice, false)}</Text>\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div className=\"listing-booking-modal__stripe-card-section\">\r\n          <CardElement\r\n            hidePostalCode\r\n            className=\"listing-booking-modal__stripe-card\"\r\n          />\r\n          <Button \r\n            size=\"large\" type=\"primary\" loading={loading}\r\n            className=\"listing-booking-modal__cta\"\r\n            onClick={handleCreateBooking}\r\n          >\r\n            Book\r\n          </Button>\r\n        </div>\r\n\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport const WrappedListingCreateBookingModal = injectStripe(ListingCreateBookingModal)","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Avatar, Divider, Tag, Typography } from 'antd'\r\nimport { EnvironmentOutlined } from '@ant-design/icons'\r\nimport { Listing as ListingData } from '../../lib/graphql/queries'\r\nimport { iconColor } from '../../lib/utils'\r\n\r\nconst { Paragraph, Title } = Typography\r\n\r\ninterface Props {\r\n  listing: ListingData[\"listing\"]\r\n}\r\nexport const ListingDetails = ({ listing }: Props) => {\r\n\r\n  const { \r\n    title, description, image, type, address, city, numOfGuests, host\r\n  } = listing\r\n\r\n  return (\r\n    <div className=\"listing-details\">\r\n      \r\n      <div \r\n        style={{ backgroundImage: `url(${image})` }} \r\n        className=\"listing-details__image\"\r\n      />\r\n\r\n      <div className=\"listing-details__information\">\r\n        <Paragraph type=\"secondary\" ellipsis className=\"listing-details__city-address\">\r\n          <Link to={`/listings/${city}`}>  \r\n            <EnvironmentOutlined style={{ color: iconColor }} /> {city}\r\n          </Link>\r\n          <Divider type=\"vertical\" />\r\n          {address}\r\n        </Paragraph>\r\n        <Title level={3} className=\"listing-details__title\">\r\n          {title}\r\n        </Title>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"listing-details__section\">\r\n        <Link to={`/user/${host.id}`}>\r\n          <Avatar src={host.avatar} size={64} />\r\n          <Title level={2} className=\"listing-details__host-name\">\r\n            {host.name}\r\n          </Title>\r\n        </Link>\r\n      </div>\r\n\r\n      <Divider />\r\n    \r\n      <div className=\"listing-details__section\">\r\n        <Title level={4}>About this space</Title> \r\n        <div className=\"listing-details__about-items\">    \r\n          <Tag color=\"magenta\">{type}</Tag>\r\n          <Tag color=\"magenta\">{numOfGuests} Guests</Tag>\r\n        </div>\r\n        <Paragraph ellipsis={{ rows: 3, expandable: true}}>\r\n          {description}\r\n        </Paragraph>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect, /*useRef*/ } from 'react'\r\nimport { Link, RouteComponentProps, /*Redirect*/ } from 'react-router-dom'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { Affix, Layout, List, Typography } from 'antd'\r\nimport { ErrorBanner, ListingCard } from '../../lib/components'\r\nimport { \r\n  LISTINGS, Listings as ListingsData, \r\n  ListingsVariables, ListingsFilter, \r\n} from '../../lib/graphql/queries'\r\nimport { ListingsFilters, ListingsPagination, ListingsSkeleton } from './'\r\n\r\ninterface MatchParams {\r\n  location: string\r\n  history: string\r\n}\r\nconst { Content } = Layout\r\nconst { Title, Paragraph, Text } = Typography\r\nconst PAGE_LIMIT = 8\r\n\r\nexport const Listings = ({ match, history }: RouteComponentProps<MatchParams> ) => {\r\n  //const locationRef = useRef(match.params.location)\r\n  const [filter, setFilter] = useState(ListingsFilter.PRICE_LOW_TO_HIGH)\r\n  const [page, setPage] = useState(1)\r\n  const [location, setLocation] = useState(match.params.location)\r\n\r\n  useEffect(() =>{\r\n    setPage(1)\r\n    //locationRef.current = match.params.location\r\n    setLocation(match.params.location)\r\n  }, [match.params.location]) \r\n\r\n  const { loading, data, error } = useQuery<ListingsData, ListingsVariables>(LISTINGS, {\r\n    skip: location !== match.params.location && page !== 1, \r\n    //locationRef.current !== match.params.location && page !== 1, \r\n    variables: { location, filter, page, limit: PAGE_LIMIT }\r\n  })\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"listings\">      \r\n        <ListingsSkeleton />\r\n      </Content>\r\n    )\r\n  }\r\n\r\n  const redirectHome = () => {\r\n    // return <Redirect to=\"/\" /> // this does NOT work\r\n    history.push('/')\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <ErrorBanner \r\n          description={`\r\n            We either couldn't find anything matching your search \r\n            or encountered an error. If you are searching for a unique \r\n            location please try seaching adain with more common keywords.\r\n          `}\r\n          nextAction={redirectHome}\r\n        />\r\n        <ListingsSkeleton />\r\n      </Content>\r\n    )\r\n  }\r\n\r\n  const listings = data ? data.listings : null\r\n  const total: number = listings?.total ? listings.total : 0 \r\n  const listingsRegion = listings ? listings.region : null\r\n\r\n  const listingsSectionElement = listings && listings.result.length ? (\r\n    <>\r\n      <Affix offsetTop={64}>\r\n        <ListingsPagination\r\n          total={total}\r\n          limit={PAGE_LIMIT}\r\n          page={page}\r\n          setPage={setPage}\r\n        />\r\n        <ListingsFilters filter={filter} setFilter={setFilter} />\r\n      </Affix>\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 4,\r\n          lg: 4,\r\n          xl: 4,\r\n          xxl: 4,\r\n        }}\r\n        dataSource={listings.result}\r\n        renderItem={listing => (\r\n          <List.Item>\r\n            <ListingCard listing={listing} />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </>\r\n  ) : (\r\n    <div>\r\n      <Paragraph>\r\n        It appears that no listings have yet been reated for {\" \"}\r\n        <Text mark>\"{listingsRegion}\"</Text>\r\n      </Paragraph>\r\n      <Paragraph>\r\n        Be the first to <Link to=\"/host\">create</Link> a listing in this area!\r\n      </Paragraph>\r\n    </div>\r\n  )\r\n\r\n  const listingsRegionElement = listingsRegion ? (\r\n    <Title level={3} className=\"listings__title\">\r\n      Results for \"{listingsRegion}\"\r\n    </Title>\r\n  ) : null \r\n\r\n  return (\r\n    <Content className=\"listings\">\r\n      {listingsRegionElement}\r\n      {listingsSectionElement}\r\n    </Content>\r\n  )\r\n}","import React from 'react'\r\nimport { Select } from 'antd'\r\nimport { ListingsFilter } from '../../lib/graphql/globalTypes'\r\n\r\nconst { Option } = Select\r\n\r\ninterface Props {\r\n  filter: ListingsFilter\r\n  setFilter: (filter: ListingsFilter) => void\r\n}\r\nexport const ListingsFilters = ({ filter, setFilter }: Props) => {\r\n  return (\r\n    <div className=\"listings-filters\">\r\n      <span>Filter by</span>\r\n      <Select\r\n        value={filter}\r\n        onChange={(filter: ListingsFilter) => setFilter(filter)}\r\n      >\r\n        <Option value={ListingsFilter.PRICE_LOW_TO_HIGH}>Price: Low to High</Option>\r\n        <Option value={ListingsFilter.PRICE_HIGH_TO_LOW}>Price: High to Low</Option>\r\n      </Select>\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\nimport { Pagination } from 'antd'\r\n\r\ninterface Props {\r\n  total: number\r\n  limit: number\r\n  page: number\r\n  setPage: (page: number) => void\r\n}\r\nexport const ListingsPagination = ({ total, limit, page, setPage }: Props) => {\r\n  return (\r\n    <Pagination\r\n      current={page}\r\n      total={total}\r\n      defaultPageSize={limit}\r\n      hideOnSinglePage\r\n      showLessItems\r\n      onChange={(page: number) => setPage(page)}\r\n      className=\"listings-pagination\"\r\n    />\r\n  )\r\n}","import React from 'react'\r\nimport { Card, List, Skeleton } from 'antd'\r\nimport loadingCard from './assets/listing-loading-card-cover.jpg'\r\n\r\nexport const ListingsSkeleton = () => {\r\n\r\n  const eightEmptyObjects = [{}, {}, {}, {}, {}, {}, {}, {}]\r\n\r\n  return (\r\n    <div className=\"listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 1 }} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          xs: 1,\r\n          sm: 2,\r\n          md: 4,\r\n          lg: 4,\r\n          xl: 4,\r\n          xxl: 4,\r\n        }} \r\n        dataSource={eightEmptyObjects}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card          \r\n              cover={\r\n                <div \r\n                  style={{ backgroundImage: `url(${loadingCard})` }}\r\n                  className=\"listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading \r\n              className=\"listings-skeleton__card\"\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","export default \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","import React, { useEffect, useRef } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useApolloClient, useMutation } from '@apollo/react-hooks'\r\nimport { Card, Layout, Spin, Typography } from 'antd'\r\nimport googleLogo from './assets/google_logo.jpg'\r\nimport { Viewer } from '../../lib/types'\r\nimport { AUTH_URL, AuthUrl as AuthUrlData } from '../../lib/graphql/queries'\r\nimport { LOG_IN, LogIn as LogInData, LogInVariables } from '../../lib/graphql/mutations'\r\nimport { ErrorBanner } from '../../lib/components'\r\nimport { displaySuccessNotification, displayErrorMessage } from '../../lib/utils'\r\n\r\nconst { Content } = Layout\r\nconst { Text, Title } = Typography\r\n\r\ninterface Props {\r\n    setViewer: (viewer: Viewer) => void\r\n}\r\n\r\nexport const Login = ({ setViewer }: Props) => {\r\n    const client = useApolloClient()\r\n\r\n    const [logIn, {data:logInData, loading:logInLoading, error:logInError}] = \r\n        useMutation<LogInData, LogInVariables>(\r\n            LOG_IN,\r\n            { onCompleted: data => {\r\n                if (data && data.logIn && data.logIn.token) {\r\n                    setViewer(data.logIn)\r\n                    sessionStorage.setItem('token', data.logIn.token)\r\n                    displaySuccessNotification('You are logged in successfully.')\r\n                } \r\n            }}\r\n        )\r\n    ;\r\n\r\n    const logInRef = useRef(logIn) \r\n    // logInRef avoids putting logIn into the useEffect dependencies\r\n    useEffect(() => {\r\n        const code = new URL(window.location.href).searchParams.get(\"code\")\r\n        if (code) {\r\n            logInRef.current({\r\n                variables: {\r\n                    input: { code }\r\n                }\r\n            })\r\n        }\r\n    }, [])\r\n\r\n    const handleAuthorize = async () => {\r\n        try {\r\n            const { data } = await client.query<AuthUrlData>({\r\n                query: AUTH_URL \r\n            })\r\n            window.location.href = data.authUrl\r\n        } catch (error) {\r\n            displayErrorMessage(\"Sorry, we couldn't log you in: Try again later!\")\r\n        }\r\n    }\r\n\r\n    if (logInLoading) {\r\n        return (\r\n            <Content className=\"log-in\">\r\n                <Spin size=\"large\" tip=\"Logging you in ...\" />\r\n            </Content>\r\n        )\r\n    }\r\n\r\n    if (logInData && logInData.logIn) {\r\n        const { id: viewerId } = logInData.logIn\r\n        return (\r\n            <Redirect to={'/user/' + viewerId} />\r\n        )\r\n    }\r\n\r\n    const logInErrorBannerElement = logInError \r\n        ? <ErrorBanner description=\"Sorry, we couldn't log you in: Try again later!\" />\r\n        : null\r\n    ;\r\n\r\n    return (\r\n        <Content className=\"log-in\">\r\n            {logInErrorBannerElement}\r\n            <Card className=\"log-in-card\">\r\n                <div className=\"log-in-card__intro\">\r\n                    <Title level={3} className=\"log-in-card__intro-title\">\r\n                        <span role=\"img\" aria-label=\"little tent\">\r\n                            &#127914;\r\n                        </span>\r\n                    </Title>\r\n                    <Title level={3} className=\"log-in-card__intro-title\">\r\n                        Log in to Tinihouse!\r\n                    </Title>\r\n                    <Text>Sign in with Google to start booking available rentals!</Text>\r\n                </div>\r\n                <button \r\n                    className=\"log-in-card__google-button\" \r\n                    onClick={handleAuthorize}\r\n                >\r\n                    <img src={googleLogo} alt=\"Google Logo\" className=\"log-in-card__google-button-logo\" />\r\n                    <span className=\"log-in-card__google-button-text\">\r\n                        Sign in with Google\r\n                    </span>\r\n                </button>\r\n                <Text type=\"secondary\">\r\n                    Note: By signing in, you will be redirected to \r\n                    Google consent form to sign in with your Google account.\r\n                </Text>\r\n            </Card>\r\n        </Content>\r\n    )\r\n}","export default \"data:image/jpeg;base64,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\"","import React from 'react'\r\n\r\nexport const NotFound = () => {\r\n    return <h2>NotFound</h2>\r\n}","import React, { useEffect, useRef } from 'react'\r\nimport { Redirect, RouteComponentProps } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { Layout, Spin } from 'antd'\r\nimport { \r\n  CONNECT_STRIPE, ConnectStripe as ConnectStripeData, ConnectStripeVariables, \r\n} from '../../lib/graphql/mutations'\r\nimport { Viewer } from '../../lib/types'\r\nimport { displaySuccessNotification } from './../../lib/utils'\r\n\r\nconst { Content } = Layout\r\n\r\ninterface Props {\r\n  viewer: Viewer\r\n  setViewer: (viewer: Viewer) => void\r\n}\r\nexport const Stripe = ({ viewer, setViewer, history }: Props & RouteComponentProps) => {\r\n  const [connectStripe, { data, loading, error }] = \r\n    useMutation<ConnectStripeData, ConnectStripeVariables>(\r\n      CONNECT_STRIPE,\r\n      { onCompleted: data => {\r\n        if (data && data.connectStripe) {\r\n        setViewer({ ...viewer, hasWallet: data.connectStripe.hasWallet })\r\n        displaySuccessNotification(\r\n          \"Your Stripe account is connected!\",\r\n          \"You can begin to create listings in the Home page.\"\r\n        )\r\n      }}}  \r\n    )\r\n  ;\r\n\r\n  const connectStripeRef = useRef(connectStripe)\r\n\r\n  useEffect(() => {\r\n    const code = new URL(window.location.href).searchParams.get(\"code\")\r\n    if (code) {\r\n      connectStripeRef.current({ variables: { input: { code } } })\r\n    } else {\r\n      history.replace('/login')\r\n    }\r\n  }, [history])\r\n\r\n  if (data && data.connectStripe) {\r\n    return <Redirect to={`/user/${viewer.id}`} />\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"stripe\">\r\n        <Spin size=\"large\" tip=\"Connecting your Stripe account ...\" />\r\n      </Content>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to={`/user/${viewer.id}?stripe_error=true`} />\r\n  }\r\n\r\n  return null\r\n}","import React, { useState } from 'react'\r\nimport { useQuery } from '@apollo/react-hooks'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { Layout, Row, Col } from 'antd'\r\nimport { USER, User as UserData, UserVariables } from '../../lib/graphql/queries'\r\nimport { UserProfile } from '.'\r\nimport { Viewer } from '../../lib/types'\r\nimport { ErrorBanner, PageSkeleton } from '../../lib/components'\r\nimport { UserBookings, UserListings} from '.'\r\n\r\nconst { Content } = Layout\r\nconst PAGE_LIMIT = 4\r\n\r\ninterface  MatchParams {\r\n    id: string\r\n}\r\ninterface Props {\r\n    viewer: Viewer\r\n    setViewer: (viewer: Viewer) => void\r\n}\r\nexport const User = ({ viewer, setViewer, match }: Props & RouteComponentProps<MatchParams>) => {\r\n       \r\n    const [listingsPage, setListingsPage] = useState(1)\r\n    const [bookingsPage, setBookingsPage] = useState(1)\r\n    \r\n    const { data, loading, error, refetch } = \r\n        useQuery<UserData, UserVariables>(\r\n            USER,\r\n            { variables: { \r\n                id: match.params.id, \r\n                bookingsPage,\r\n                listingsPage,\r\n                limit: PAGE_LIMIT\r\n            }}\r\n        )\r\n    ;\r\n\r\n    const handleUserRefetch = async () => {\r\n      await refetch()\r\n    }\r\n\r\n    const stripeError = new URL(window.location.href).searchParams.get('stripe_error')          \r\n    const stripeErrorBanner = stripeError ? (\r\n      <ErrorBanner description=\"There was an issue connecting to Stripe. Please try again!\" />\r\n    ) : null\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"user\">\r\n                <PageSkeleton />\r\n            </Content>\r\n        )\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Content className=\"user\">\r\n                <ErrorBanner description=\"This user may not exist or we encountered an error. Please try again later!\" />\r\n                <PageSkeleton />\r\n            </Content>\r\n        )\r\n    }\r\n\r\n    const user = data ? data.user : null\r\n    const viewerIsUser = viewer.id === match.params.id\r\n    const userListings = user ? user.listings : null\r\n    const userBookings = user ? user.bookings : null\r\n\r\n    const userProfileElement = user \r\n        ? <UserProfile \r\n            user={user} \r\n            viewer={viewer}\r\n            setViewer={setViewer} \r\n            viewerIsUser={viewerIsUser} \r\n            handleUserRefetch={handleUserRefetch}\r\n          /> \r\n        : null\r\n    ;\r\n    const userListingsElement = userListings\r\n        ? (\r\n            <UserListings \r\n                userListings={userListings} \r\n                listingsPage={listingsPage}\r\n                limit={PAGE_LIMIT}\r\n                setListingsPage={setListingsPage}\r\n            />\r\n          )  \r\n        : null\r\n    ;\r\n    const userBookingsElement = viewerIsUser \r\n        ? (\r\n            <UserBookings \r\n                userBookings={userBookings} \r\n                bookingsPage={bookingsPage}\r\n                limit={PAGE_LIMIT}\r\n                setBookingsPage={setBookingsPage}\r\n            />\r\n          )  \r\n        : null\r\n    \r\n\r\n\r\n    return (\r\n        <Content className=\"user\">\r\n            {stripeErrorBanner}\r\n            <Row gutter={12} justify=\"space-between\">\r\n                <Col xs={24}>\r\n                    {userProfileElement}\r\n                </Col>\r\n                <Col xs={24}>\r\n                    {userListingsElement}\r\n                    {userBookingsElement}\r\n                </Col>\r\n            </Row>\r\n        </Content>\r\n    )\r\n}","import React from 'react'\r\nimport { List, Typography } from 'antd'\r\nimport { ListingCard } from '../../lib/components'\r\nimport { User } from '../../lib/graphql/queries'\r\n\r\nconst { Paragraph, Text, Title } = Typography\r\n\r\ninterface Props {\r\n    userBookings: User['user']['bookings']\r\n    bookingsPage: number\r\n    limit: number\r\n    setBookingsPage: (page: number) => void\r\n}\r\nexport const UserBookings = ({ \r\n    userBookings, \r\n    bookingsPage, \r\n    limit,\r\n    setBookingsPage\r\n}: Props ) => {\r\n\r\n    const total = userBookings ? userBookings.total : null\r\n    const result = userBookings ? userBookings.result : null\r\n \r\n    console.log({userBookings})\r\n\r\n    const userBookingsList = userBookings\r\n        ? (\r\n            <List\r\n                grid={{\r\n                    gutter: 8,\r\n                    xs: 1,\r\n                    sm: 2,\r\n                    lg: 4,\r\n                }}\r\n                dataSource={result ? result : undefined}\r\n                locale={{\r\n                    emptyText: \"You haven't made any bookings yet.\",\r\n                }}\r\n                pagination={{\r\n                    position: \"top\",\r\n                    current: bookingsPage,\r\n                    total: total ? total : undefined,\r\n                    defaultPageSize: limit,\r\n                    hideOnSinglePage: true,\r\n                    showLessItems: true,\r\n                    onChange: (page: number) => setBookingsPage(page),\r\n                }}\r\n                renderItem={(userBooking) => {\r\n                    const bookingHistory = (\r\n                        <div className=\"\"user-bookings__bookings-history>\r\n                            <div>\r\n                               Ckeck in: <Text strong>{userBooking.checkIn}</Text> \r\n                            </div>\r\n                            <div>\r\n                               Ckeck out: <Text strong>{userBooking.checkOut}</Text> \r\n                            </div>\r\n                        </div>\r\n                    )\r\n                    return (\r\n                        <List.Item>\r\n                            {bookingHistory}\r\n                            <ListingCard listing={userBooking.listing} />\r\n                        </List.Item>\r\n                    )\r\n                }}\r\n            />\r\n        )\r\n        : null\r\n    ;\r\n    \r\n    return (\r\n        <div className=\"user-bookings\">\r\n            <Title level={4} className=\"user-bookings__title\">\r\n                Bookings\r\n            </Title>\r\n            <Paragraph className=\"user-bookings__description\">\r\n                This section highlights the bookings youh've made,\r\n                and the dates associated with this bookings.\r\n            </Paragraph>\r\n            {userBookingsList \r\n                ? userBookingsList \r\n                : <List locale={{emptyText: 'No, no, no bookings, yet!'}} />\r\n            }\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { List, Typography } from 'antd'\r\nimport { ListingCard } from '../../lib/components'\r\nimport { User } from '../../lib/graphql/queries'\r\n\r\nconst { Paragraph, Title } = Typography\r\n\r\ninterface Props {\r\n    userListings: User['user']['listings']\r\n    listingsPage: number\r\n    limit: number \r\n    setListingsPage: (page: number) => void\r\n}\r\nexport const UserListings = ({ \r\n    userListings, \r\n    listingsPage, \r\n    limit,\r\n    setListingsPage\r\n}: Props ) => {\r\n\r\n    const { total, result } = userListings\r\n    const myTotal = total ? total : 0\r\n    \r\n    const userListingsList = (\r\n        <List\r\n            grid={{\r\n                gutter: 8,\r\n                xs: 1,      // <  576\r\n                sm: 2,      // >= 576\r\n                md: 3,      // >= 768\r\n                lg: 4,      // >= 992\r\n                xl: 5,      // >=1200 \r\n                xxl: 6,     // >=1600\r\n            }}\r\n            dataSource={result}\r\n            locale={{\r\n                emptyText: \"User does'n have any listings yet.\",\r\n            }}\r\n            pagination={{\r\n                position: \"top\",\r\n                current: listingsPage,\r\n                total: myTotal,\r\n                defaultPageSize: limit,\r\n                hideOnSinglePage: true,\r\n                showLessItems: true,\r\n                onChange: (page: number) => setListingsPage(page),\r\n            }}\r\n            renderItem={(userListing) => (\r\n                <List.Item>\r\n                    <ListingCard listing={userListing} />\r\n                </List.Item>\r\n            )}\r\n        />\r\n    )\r\n\r\n    return (\r\n        <div className=\"user-listings\">\r\n            <Title level={4} className=\"user-listings__title\">\r\n                Listings\r\n            </Title>\r\n            <Paragraph className=\"user-listings__description\">\r\n                This section highlights the listings this user currently \r\n                hosts and has made available for bookings.\r\n            </Paragraph>\r\n            {userListingsList}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { Avatar, Button, Card, Divider, Tag, Typography } from 'antd'\r\nimport { formatPrice, displaySuccessNotification, displayErrorMessage } from '../../lib/utils'\r\nimport { DISCONNECT_STRIPE, DisconnectStripe as DisconnectStripeData} from '../../lib/graphql/mutations'\r\nimport { User as UserData } from '../../lib/graphql/queries'\r\nimport { Viewer } from '../../lib/types'\r\n\r\ninterface Props {\r\n    user: UserData['user'] // look-up- (indexed-access-) types\r\n    viewer: Viewer\r\n    setViewer: (viewer: Viewer) => void\r\n    viewerIsUser: boolean\r\n    handleUserRefetch: () => Promise<void>\r\n}\r\nconst { Paragraph, Text, Title } = Typography\r\nconst id = process.env.REACT_APP_STRIPE_CLIENT_ID\r\nconst stripeAuthUrl =\r\n  `https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${id}&scope=read_write`\r\n;\r\n\r\nexport const UserProfile = ({ \r\n  user, viewer, setViewer, viewerIsUser, handleUserRefetch \r\n}: Props) => {\r\n\r\n  const [disconnectStripe, { loading }] = useMutation<DisconnectStripeData>(\r\n    DISCONNECT_STRIPE,\r\n    { \r\n      onCompleted: data => {\r\n        setViewer({ ...viewer, hasWallet: data.disconnectStripe.hasWallet })\r\n        if (data && data.disconnectStripe) {\r\n          displaySuccessNotification(\r\n            \"You are disconnected from Stripe.\",\r\n            \"You have to reconnect to Stripe in order to create listings.\"\r\n          )\r\n        }\r\n        handleUserRefetch()\r\n      },\r\n      onError: () => {\r\n        displayErrorMessage(\"Sorry, diconnecting Stripe failed. Please try again later.\")\r\n      }\r\n    }\r\n  )\r\n  \r\n  const redirectToStripe = () => {\r\n    window.location.href = stripeAuthUrl\r\n  }\r\n\r\n  const additionalDetails = user.hasWallet ? (\r\n    <>\r\n      <Paragraph>\r\n        <Tag color=\"green\">Stripe Registered</Tag>\r\n      </Paragraph>\r\n      <Paragraph>\r\n        Income Earned: {\" \"}\r\n        <Text strong>\r\n          {formatPrice(user.income ? user.income : 0)}\r\n        </Text>\r\n      </Paragraph>\r\n      <Button \r\n        type=\"primary\" \r\n        className=\"user-profile__details-cta\" \r\n        loading={loading}\r\n        onClick={() => disconnectStripe()}\r\n      >\r\n        Disconnect Stripe\r\n      </Button>\r\n      <Paragraph type=\"secondary\">\r\n        By disconnecting, you won't be able to receive &nbsp;\r\n        <Text strong>any further payments</Text> This will prevent users\r\n        from booking listings that you might have already created.\r\n      </Paragraph>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <Paragraph>\r\n        Interested in becoming a Tinihouse host?\r\n        Register with your Stripe account!    \r\n      </Paragraph>\r\n      <Button \r\n        type=\"primary\" \r\n        className=\"user-profile__details-cta\"\r\n        onClick={redirectToStripe}\r\n      >\r\n          Connect with Stripe\r\n      </Button>\r\n      <Paragraph type=\"secondary\">\r\n        Tinihouse uses <a \r\n          href=\"https://stripe.com/en-Us/connect\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Stripe\r\n        </a> \r\n        to help transfer your earnings in secure and trusted manner. \r\n      </Paragraph>\r\n    </>\r\n  ) \r\n\r\n  const additionalDetailsSection = viewerIsUser? (\r\n    <>\r\n      <Divider />\r\n      <div className=\"user-profile__details\" >\r\n        <Title level={4}>Additional Details</Title>\r\n        {additionalDetails}\r\n      </div>\r\n    </>\r\n  ) : null\r\n  \r\n\r\n  return (\r\n    <div className=\"user-profile\">\r\n      <Card className=\"user-profile__card\">\r\n        <div className=\"user-profile__avatar\">\r\n          <Avatar size={100} src={user.avatar} />\r\n        </div> \r\n        <Divider />\r\n        <div className=\"user-profile__details\">\r\n          <Title level={4}>Details</Title>\r\n          <Paragraph>\r\n            Name: <Text strong>{user.name}</Text>   \r\n          </Paragraph> \r\n          <Paragraph>\r\n            Contact: <Text strong>{user.contact}</Text>    \r\n          </Paragraph>    \r\n        </div> \r\n        {additionalDetailsSection}\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { render } from 'react-dom';\n\nimport ApolloClient from 'apollo-boost' \nimport { ApolloProvider, useMutation } from 'react-apollo'\nimport { StripeProvider, Elements } from 'react-stripe-elements'\n\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { \n  AppHeader, AppHeaderSkeleton, Home, Host, \n  Listing, Listings, Login, NotFound, User, Stripe \n} from './sections'\nimport { Viewer } from './lib/types'\nimport { ErrorBanner } from './lib/components'\nimport { LOG_IN, LogIn as LogInData, LogInVariables }  from './lib/graphql/mutations'\nimport reportWebVitals from './reportWebVitals';\n\nimport { Affix, Layout, Spin } from 'antd'\nimport \"./lib/styles.css\"\n\nconst client = new ApolloClient({\n    uri: '/api',  // because of \"proxy\": \"http://localhost:9000\" in package.json\n    request: operation => {\n        const token = sessionStorage.getItem('token')\n        operation.setContext({\n            headers: {\n                'X-CSRF-TOKEN': token || ''\n            }\n        })\n    }\n})\n\nconst initialViewer: Viewer = {\n    id: null,\n    token: null,\n    avatar: null,\n    hasWallet: null,\n    didRequest: false\n}\n\nconst App = () => {\n    const [viewer, setViewer] = useState<Viewer>(initialViewer)\n\n    const [logIn, { error }] = useMutation<LogInData, LogInVariables>(LOG_IN, {\n        onCompleted: data => {\n            if (data && data.logIn) {\n                setViewer(data.logIn)\n                if (data.logIn.token) {\n                    sessionStorage.setItem('token', data.logIn.token)\n                } else {\n                    sessionStorage.removeItem('token')\n                }\n            }\n        }\n    })\n    const logInRef = useRef(logIn)\n    useEffect( () => {\n        logInRef.current()\n    }, [])\n\n    if (!viewer.didRequest && !error) {\n        return (\n            <Layout className=\"app-skeleton\">\n                <AppHeaderSkeleton />\n                <div className=\"app-skeleton__spin-section\">\n                    <Spin size=\"large\" tip=\"Launching Tinihouse\" />\n                </div>\n            </Layout>\n        )\n    }\n\n    const loginError = error ? (\n      <ErrorBanner description=\"Problem with logging in: Please try again later!\" /> \n    ) : null\n\n    return (\n      <Router>\n        <Layout id=\"app\">\n          {loginError}\n          <Affix offsetTop={0} className=\"app__affix-header\">\n            <AppHeader viewer={viewer} setViewer={setViewer} />\n          </Affix>\n          <Switch>\n            <Route \n              exact \n              path=\"/\" \n              component={Home} \n            />\n            <Route \n              exact \n              path=\"/host\" \n              render={props => <Host { ...props } viewer={viewer} />}\n            />\n            <Route \n              exact \n              path=\"/listing/:id\" \n              render={props => (\n                <Elements>\n                  <Listing { ...props } viewer={viewer} />\n                </Elements>\n              )}\n            />\n            <Route \n              exact \n              path=\"/listings/:location?\" \n              component={Listings} \n            />\n            <Route \n              exact \n              path=\"/login\" \n              render={props => <Login {...props} setViewer={setViewer} />}\n            />\n            <Route \n              exact \n              path=\"/stripe\" \n              render={props => <Stripe {...props} viewer={viewer} setViewer={setViewer} />}\n            />\n            <Route \n              exact \n              path=\"/user/:id\" \n              render={props => <User {...props} viewer={viewer} setViewer={setViewer} />}                     \n            />\n            <Route component={NotFound} />\n          </Switch>\n        </Layout>\n      </Router>\n    )\n}\n\nrender(\n    <ApolloProvider client={client}>\n      <StripeProvider apiKey={process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY as string}>\n        <App />\n      </StripeProvider>\n    </ApolloProvider>\n    ,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export * from './ConnectStripe'\r\nexport * from './CreateBooking'\r\nexport * from './DisconnectStripe'\r\nexport * from './HostListing'\r\nexport * from './LogIn'\r\nexport * from './LogOut'\r\nexport * from '../globalTypes'","/* tslint:disable */\n/* eslint-disable */\n// @generated\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum ListingType {\n  APARTMENT = \"APARTMENT\",\n  HOUSE = \"HOUSE\",\n}\n\nexport enum ListingsFilter {\n  PRICE_HIGH_TO_LOW = \"PRICE_HIGH_TO_LOW\",\n  PRICE_LOW_TO_HIGH = \"PRICE_LOW_TO_HIGH\",\n}\n\nexport interface ConnectStripeInput {\n  code: string;\n}\n\nexport interface CreateBookingInput {\n  listingId: string;\n  source: string;\n  checkIn: string;\n  checkOut: string;\n}\n\nexport interface HostListingInput {\n  title: string;\n  description: string;\n  image: string;\n  type: ListingType;\n  address: string;\n  price: number;\n  numOfGuests: number;\n}\n\nexport interface LogInInput {\n  code: string;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n","export * from './AuthUrl'\r\nexport * from './Listing'\r\nexport * from './Listings'\r\nexport * from './User'\r\nexport * from '../globalTypes'"],"sourceRoot":""}